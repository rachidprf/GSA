<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>??????? - ?????? ??? ???? ?????? ??????</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', 'Segoe UI', sans-serif;
        }
        body {
            background: #f0f5ff;
            color: #333;
            padding: 20px;
            line-height: 1.8;
            direction: rtl;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.1);
            padding: 30px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eaeaea;
        }
        h1 {
            color: #1a5fb4;
            font-size: 28px;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #666;
            font-size: 16px;
        }
        .question-block {
            margin-bottom: 25px;
            padding: 20px;
            background-color: #f8fafd;
            border-radius: 10px;
            border-right: 5px solid #1a5fb4;
        }
        .question-title {
            font-size: 18px;
            color: #1a5fb4;
            margin-bottom: 15px;
            font-weight: bold;
            display: flex;
            align-items: center;
        }
        .question-number {
            background-color: #1a5fb4;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-left: 10px;
            font-weight: bold;
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .option-row {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            padding: 5px 0;
        }
        input[type="radio"], input[type="checkbox"] {
            margin-left: 10px;
            width: 18px;
            height: 18px;
        }
        label {
            font-size: 16px;
            cursor: pointer;
            flex-grow: 1;
        }
        .text-input, .select-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 16px;
            margin-top: 10px;
            direction: rtl;
            text-align: right;
        }
        .sub-question {
            margin-right: 20px;
            margin-top: 15px;
            padding-right: 15px;
            border-right: 2px dashed #bdc3c7;
        }
        .sub-question-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 16px;
        }
        .conditional {
            display: none;
            margin-top: 10px;
            animation: fadeIn 0.3s ease;
        }
        .show {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .btn-submit {
            background-color: #1a5fb4;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            display: block;
            margin: 30px auto 0;
            transition: background-color 0.3s;
            font-weight: bold;
        }
        .btn-submit:hover {
            background-color: #0d4a9c;
        }
        .footer {
            text-align: center;
            color: #777;
            font-size: 14px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        .progress-container {
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 4px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background-color: #1a5fb4;
            width: 0%;
            transition: width 0.5s;
        }
        .required {
            color: #e74c3c;
            margin-right: 5px;
        }
        .note {
            color: #666;
            margin-bottom: 10px;
            text-align: right;
            font-size: 14px;
        }
        @media (max-width: 768px) {
            .container {
                padding: 20px 15px;
            }
            h1 {
                font-size: 24px;
            }
            .question-block {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>
    
    <div class="container">
        <header>
            <h1>??????? - ?????? ??? ???? ?????? ??????</h1>
            <p class="subtitle">???? ??? ?????? ?????? ??? ??????</p>
        </header>
        
        <form id="enqueteForm" action="https://formspree.io/f/YOUR_FORM_ID" method="POST">
            <!-- ?????? 1: ????? -->
            <div class="question-block">
                <div class="question-title">
                    <span class="question-number">1</span> ????? <span class="required">*</span>
                </div>
                <div class="options">
                    <div class="option-row">
                        <input type="radio" id="age1" name="age" value="??? ?? 15 ???" required>
                        <label for="age1">??? ?? 15 ???</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="age2" name="age" value="15-29 ???">
                        <label for="age2">15–29 ???</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="age3" name="age" value="30-44 ???">
                        <label for="age3">30–44 ???</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="age4" name="age" value="45-59 ???">
                        <label for="age4">45–59 ???</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="age5" name="age" value="60 ??? ??? ???">
                        <label for="age5">60 ??? ??? ???</label>
                    </div>
                </div>
            </div>
            
            <!-- ?????? 2: ????? -->
            <div class="question-block">
                <div class="question-title">
                    <span class="question-number">2</span> ????? <span class="required">*</span>
                </div>
                <div class="options">
                    <div class="option-row">
                        <input type="radio" id="sexe1" name="sexe" value="????" required>
                        <label for="sexe1">????</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="sexe2" name="sexe" value="???">
                        <label for="sexe2">???</label>
                    </div>
                </div>
            </div>
            
            <!-- ?????? 3: ??? ????? ?????? -->
            <div class="question-block">
                <div class="question-title">
                    <span class="question-number">3</span> ??? ????? ?????? <span class="required">*</span>
                </div>
                <div class="options">
                    <div class="option-row">
                        <input type="radio" id="profil1" name="profil" value="???? ?? ?????? ??????" required>
                        <label for="profil1">???? ?? ?????? ??????</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="profil2" name="profil" value="???? ????">
                        <label for="profil2">???? ????</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="profil3" name="profil" value="???? ????">
                        <label for="profil3">???? ????</label>
                    </div>
                </div>
            </div>
            
            <!-- ?????? 4: ???? ???????? -->
            <div class="question-block">
                <div class="question-title">
                    <span class="question-number">4</span> ???? ???????? <span class="required">*</span>
                </div>
                <div class="options">
                    <div class="option-row">
                        <input type="radio" id="origine1" name="origine" value="????? ??????" required>
                        <label for="origine1">????? ??????</label>
                    </div>
                    <div class="conditional" id="communeAgadirDetail">
                        <input type="text" class="text-input" name="communeAgadirDetail" placeholder="???? ????? ???? ?? ???????/?????? ???? ????????">
                    </div>
                    
                    <div class="option-row">
                        <input type="radio" id="origine2" name="origine" value="????? ??????">
                        <label for="origine2">????? ??????</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="origine3" name="origine" value="????? ?????">
                        <label for="origine3">????? ?????</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="origine4" name="origine" value="????? ????????">
                        <label for="origine4">????? ????????</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="origine5" name="origine" value="????? ??? ????">
                        <label for="origine5">????? ??? ????</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="origine6" name="origine" value="????? ???????">
                        <label for="origine6">????? ???????</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="origine7" name="origine" value="????? ???????">
                        <label for="origine7">????? ???????</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="origine8" name="origine" value="????? ??????">
                        <label for="origine8">????? ??????</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="origine9" name="origine" value="?????/????? ????">
                        <label for="origine9">?????/????? ???? : ???? ???????</label>
                    </div>
                    <div class="conditional" id="autreCommuneDetail">
                        <input type="text" class="text-input" name="autreCommuneDetail" placeholder="???? ????? ??????? ?? ???????">
                    </div>
                </div>
            </div>
            
            <!-- ?????? 5: ????? ????? -->
            <div class="question-block">
                <div class="question-title">
                    <span class="question-number">5</span> ????? (?????) ????? ????????? ?????? ??? ?????? <span class="required">*</span>
                </div>
                <p class="note">(?? ???? ?????? ????? ???????? ??? ????? ??? ?????)</p>
                
                <div class="options">
                    <div class="option-row">
                        <input type="checkbox" id="mode1" name="mode" value="????? ??? ???????">
                        <label for="mode1">????? ??? ???????</label>
                    </div>
                    
                    <div class="sub-question" id="piedDetail">
                        <div class="sub-question-title">???? ??????</div>
                        <div class="option-row">
                            <input type="radio" id="pied1" name="pied_type" value="???? ?????? ????? ??? ???????">
                            <label for="pied1">???? ?????? ????? ??? ???????</label>
                        </div>
                        <div class="option-row">
                            <input type="radio" id="pied2" name="pied_type" value="??? ??? ??????? ???? ?? ????? ????">
                            <label for="pied2">??? ??? ??????? ???? ?? ????? ????</label>
                        </div>
                    </div>
                    
                    <div class="option-row">
                        <input type="checkbox" id="mode2" name="mode" value="????? ?????">
                        <label for="mode2">????? ?????</label>
                    </div>
                    <div class="option-row">
                        <input type="checkbox" id="mode3" name="mode" value="????? ??????">
                        <label for="mode3">????? ??????</label>
                    </div>
                    <div class="option-row">
                        <input type="checkbox" id="mode4" name="mode" value="?????">
                        <label for="mode4">?????</label>
                    </div>
                    <div class="option-row">
                        <input type="checkbox" id="mode5" name="mode" value="?????">
                        <label for="mode5">?????</label>
                    </div>
                    <div class="option-row">
                        <input type="checkbox" id="mode6" name="mode" value="????? ????">
                        <label for="mode6">????? ????</label>
                    </div>
                    <div class="option-row">
                        <input type="checkbox" id="mode7" name="mode" value="????? ????">
                        <label for="mode7">????? ????</label>
                    </div>
                    
                    <div class="option-row">
                        <input type="checkbox" id="mode8" name="mode" value="??? ????? CAN">
                        <label for="mode8">??? ????? CAN (???? ????? ??? ????? ???????)</label>
                    </div>
                    
                    <div class="conditional" id="navetteDetail">
                        <div class="sub-question">
                            <div class="sub-question-title">??? ????? ??????? CAN</div>
                            <div class="option-row">
                                <input type="radio" id="navette1" name="navette_type" value="??????">
                                <label for="navette1">??????</label>
                            </div>
                            <div class="option-row">
                                <input type="radio" id="navette2" name="navette_type" value="???? ??????">
                                <label for="navette2">???? ??????</label>
                            </div>
                            <div class="option-row">
                                <input type="radio" id="navette3" name="navette_type" value="??????">
                                <label for="navette3">??????</label>
                            </div>
                            <div class="option-row">
                                <input type="radio" id="navette4" name="navette_type" value="??????">
                                <label for="navette4">??????</label>
                            </div>
                            <div class="option-row">
                                <input type="radio" id="navette5" name="navette_type" value="???">
                                <label for="navette5">??? : ???? ???????</label>
                            </div>
                            <div class="conditional" id="autreNavetteDetail">
                                <input type="text" class="text-input" name="autreNavetteDetail" placeholder="???? ????? ????? ???????">
                            </div>
                        </div>
                    </div>
                    
                    <div class="option-row">
                        <input type="checkbox" id="mode9" name="mode" value="?????">
                        <label for="mode9">?????</label>
                    </div>
                    
                    <div class="conditional" id="voitureDetail">
                        <div class="sub-question">
                            <div class="sub-question-title">?????? ???????</div>
                            <div style="margin-bottom: 15px;">
                                <label for="nbPersonnes">??? ??????? ?? ??????? :</label>
                                <input type="number" id="nbPersonnes" name="nbPersonnes" min="1" max="20" class="text-input" style="width: 100px; margin-right: 10px; text-align: center;">
                            </div>
                            
                            <div class="sub-question-title">???? ?????? :</div>
                            
                            <div style="margin-bottom: 15px;">
                                <strong>???? ????? ?????? (??? ?????? ?????? ??????? ??????? ??????? ??????)</strong>
                                <div class="option-row">
                                    <input type="radio" id="park1" name="parking" value="????? ???? ??????">
                                    <label for="park1">????? ???? ??????</label>
                                </div>
                                <div class="option-row">
                                    <input type="radio" id="park2" name="parking" value="????? ????????/???????? ?????? ?? ???? ????? ???????">
                                    <label for="park2">????? ????????/???????? ?????? ?? ???? ????? ???????</label>
                                </div>
                                <div class="option-row">
                                    <input type="radio" id="park3" name="parking" value="???? ??? ?????????">
                                    <label for="park3">???? ??? ?????????</label>
                                </div>
                                <div class="option-row">
                                    <input type="radio" id="park4" name="parking" value="???? ??? ???? ??? ???? ????????">
                                    <label for="park4">???? ??? ???? ??? ???? ????????</label>
                                </div>
                                
                                <div style="margin-right: 15px;">
                                    <div class="sub-question-title">??? ?????? :</div>
                                    <div class="option-row">
                                        <input type="radio" id="voirie1" name="voirie" value="???? ????????">
                                        <label for="voirie1">???? ????????</label>
                                    </div>
                                    <div class="option-row">
                                        <input type="radio" id="voirie2" name="voirie" value="???? ???">
                                        <label for="voirie2">???? ???</label>
                                    </div>
                                    <div class="option-row">
                                        <input type="radio" id="voirie3" name="voirie" value="???? ??????">
                                        <label for="voirie3">???? ??????</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div>
                                <strong>???? ????? ?????? :</strong>
                                <div class="option-row">
                                    <input type="radio" id="park5" name="parking" value="???? ????? ??????">
                                    <label for="park5">???? ????? ??????/?????? :</label>
                                </div>
                                <div class="conditional" id="exterieurDetail">
                                    <input type="text" class="text-input" name="exterieurDetail" placeholder="??? ?????? ?? ??????">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ?????? 6: ???????? -->
            <div class="question-block">
                <div class="question-title">
                    <span class="question-number">6</span> ?? ????? ?? ??????? <span class="required">*</span>
                </div>
                <div class="options">
                    <div class="option-row">
                        <input type="radio" id="difficulte1" name="difficulte" value="??" required>
                        <label for="difficulte1">??</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="difficulte2" name="difficulte" value="???">
                        <label for="difficulte2">??? ? ?? ???</label>
                    </div>
                    
                    <div class="conditional" id="difficultesDetail">
                        <div class="sub-question">
                            <div class="sub-question-title">????? ???????? ???? ??????? :</div>
                            <div class="option-row">
                                <input type="checkbox" id="diff1" name="difficultes_type" value="?????? ?????">
                                <label for="diff1">?????? ?????</label>
                            </div>
                            <div class="option-row">
                                <input type="checkbox" id="diff2" name="difficultes_type" value="????? ?? ??????">
                                <label for="diff2">????? ?? ??????</label>
                            </div>
                            <div class="option-row">
                                <input type="checkbox" id="diff3" name="difficultes_type" value="?????? ?? ????? ?????">
                                <label for="diff3">?????? ?? ????? ?????</label>
                            </div>
                            <div class="option-row">
                                <input type="checkbox" id="diff4" name="difficultes_type" value="?????? ??? ?????">
                                <label for="diff4">?????? ??? ?????</label>
                            </div>
                            <div class="option-row">
                                <input type="checkbox" id="diff5" name="difficultes_type" value="???">
                                <label for="diff5">??? :</label>
                            </div>
                            <div class="conditional" id="autreDifficulteDetail">
                                <input type="text" class="text-input" name="autreDifficulteDetail" placeholder="???? ????? ???????">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <button type="submit" class="btn-submit">????? ?????????</button>
            
            <input type="hidden" name="_subject" value="?? ???? ??? ??????? ?????? ??????">
            <input type="hidden" name="_format" value="plain">
        </form>
        
        <div class="footer">
            <p>????? ???????? ?? ??? ?????????. ???????? ????? ??? ????? ??????? ?????? ??? ???? ?????? ??????.</p>
            <p>© 2023 - ??????? ????? ??????? ??????</p>
        </div>
    </div>

    <script>
        // ????? ?????? ???????
        document.querySelectorAll('input[type="radio"], input[type="checkbox"]').forEach(input => {
            input.addEventListener('change', function() {
                // ???? ????????
                if (this.name === 'origine' && this.value === '????? ??????') {
                    document.getElementById('communeAgadirDetail').classList.add('show');
                } else if (this.name === 'origine') {
                    document.getElementById('communeAgadirDetail').classList.remove('show');
                }
                
                if (this.name === 'origine' && this.value === '?????/????? ????') {
                    document.getElementById('autreCommuneDetail').classList.add('show');
                } else if (this.name === 'origine') {
                    document.getElementById('autreCommuneDetail').classList.remove('show');
                }
                
                // ????? ?????
                if (this.id === 'mode1') {
                    document.getElementById('piedDetail').classList.toggle('show', this.checked);
                }
                
                if (this.id === 'mode8') {
                    document.getElementById('navetteDetail').classList.toggle('show', this.checked);
                }
                
                if (this.id === 'mode9') {
                    document.getElementById('voitureDetail').classList.toggle('show', this.checked);
                }
                
                // ????? ??????? CAN
                if (this.name === 'navette_type' && this.value === '???') {
                    document.getElementById('autreNavetteDetail').classList.add('show');
                } else if (this.name === 'navette_type') {
                    document.getElementById('autreNavetteDetail').classList.remove('show');
                }
                
                // ?????? ???? ??????
                if (this.id === 'park5') {
                    document.getElementById('exterieurDetail').classList.toggle('show', this.checked);
                } else if (this.name === 'parking' && this.id !== 'park5') {
                    document.getElementById('exterieurDetail').classList.remove('show');
                }
                
                // ????????
                if (this.name === 'difficulte' && this.value === '???') {
                    document.getElementById('difficultesDetail').classList.add('show');
                } else if (this.name === 'difficulte') {
                    document.getElementById('difficultesDetail').classList.remove('show');
                    document.getElementById('autreDifficulteDetail').classList.remove('show');
                }
                
                // ????? ????
                if (this.id === 'diff5') {
                    document.getElementById('autreDifficulteDetail').classList.toggle('show', this.checked);
                }
                
                updateProgressBar();
            });
        });
        
        // ???? ??????
        function updateProgressBar() {
            const questions = document.querySelectorAll('.question-block');
            let answered = 0;
            
            questions.forEach(question => {
                const inputs = question.querySelectorAll('input[type="radio"]:checked, input[type="checkbox"]:checked, input[type="text"]:not([value=""]), input[type="number"]:not([value=""])');
                const required = question.querySelector('.required');
                
                if (required && inputs.length > 0) {
                    answered++;
                }
            });
            
            const progress = (answered / questions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }
        
        // ?????? ??????? ?????? ??????/???????
        document.querySelectorAll('input[type="text"], input[type="number"]').forEach(input => {
            input.addEventListener('input', updateProgressBar);
        });
        
        // ?????? ??? ???????
        document.getElementById('enqueteForm').addEventListener('submit', function(e) {
            // ?????? ??????? - ?????? ?? ?? ??????? ????????? ??????
            const requiredRadios = document.querySelectorAll('input[type="radio"][required]');
            let allRequiredFilled = true;
            
            requiredRadios.forEach(radio => {
                const name = radio.name;
                const checkedInGroup = document.querySelector(`input[name="${name}"]:checked`);
                if (!checkedInGroup) {
                    allRequiredFilled = false;
                    const questionBlock = radio.closest('.question-block');
                    questionBlock.style.borderRightColor = '#e74c3c';
                    
                    // ????? ????? ??? ????
                    setTimeout(() => {
                        questionBlock.style.borderRightColor = '#1a5fb4';
                    }, 3000);
                }
            });
            
            if (!allRequiredFilled) {
                e.preventDefault();
                alert('???? ??????? ??? ???? ??????? ????????? (?????? ????? ?? *).');
                return;
            }
            
            // ??? ??? ?????? Formspree? ???? ????? ??????? ???? ?????
            // ??? ??? ?????? ?????? ?????? ??????? ?? ?????? ????? ???????
            alert('????? ??! ?? ????? ???????? ?????.');
        });
        
        // ????? ???? ??????
        document.addEventListener('DOMContentLoaded', updateProgressBar);
    </script>
</body>
</html>