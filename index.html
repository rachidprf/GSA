<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>استبيان - التنقل إلى ملعب أكادير الكبير</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', 'Segoe UI', sans-serif;
        }
        body {
            background: #f0f5ff;
            color: #333;
            padding: 20px;
            line-height: 1.8;
            direction: rtl;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.1);
            padding: 30px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eaeaea;
        }
        h1 {
            color: #1a5fb4;
            font-size: 28px;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #666;
            font-size: 16px;
        }
        .question-block {
            margin-bottom: 25px;
            padding: 20px;
            background-color: #f8fafd;
            border-radius: 10px;
            border-right: 5px solid #1a5fb4;
        }
        .question-title {
            font-size: 18px;
            color: #1a5fb4;
            margin-bottom: 15px;
            font-weight: bold;
            display: flex;
            align-items: center;
        }
        .question-number {
            background-color: #1a5fb4;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-left: 10px;
            font-weight: bold;
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .option-row {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            padding: 5px 0;
        }
        input[type="radio"], input[type="checkbox"] {
            margin-left: 10px;
            width: 18px;
            height: 18px;
        }
        label {
            font-size: 16px;
            cursor: pointer;
            flex-grow: 1;
        }
        .text-input, .select-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 16px;
            margin-top: 10px;
            direction: rtl;
            text-align: right;
        }
        .sub-question {
            margin-right: 20px;
            margin-top: 15px;
            padding-right: 15px;
            border-right: 2px dashed #bdc3c7;
        }
        .sub-question-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 16px;
        }
        .conditional {
            display: none;
            margin-top: 10px;
            animation: fadeIn 0.3s ease;
        }
        .show {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .btn-submit {
            background-color: #1a5fb4;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            display: block;
            margin: 30px auto 0;
            transition: background-color 0.3s;
            font-weight: bold;
        }
        .btn-submit:hover {
            background-color: #0d4a9c;
        }
        .footer {
            text-align: center;
            color: #777;
            font-size: 14px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        .progress-container {
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 4px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background-color: #1a5fb4;
            width: 0%;
            transition: width 0.5s;
        }
        .required {
            color: #e74c3c;
            margin-right: 5px;
        }
        .note {
            color: #666;
            margin-bottom: 10px;
            text-align: right;
            font-size: 14px;
        }
        @media (max-width: 768px) {
            .container {
                padding: 20px 15px;
            }
            h1 {
                font-size: 24px;
            }
            .question-block {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>
    
    <div class="container">
        <header>
            <h1>استبيان - التنقل إلى ملعب أكادير الكبير</h1>
            <p class="subtitle">رأيك مهم لتحسين الوصول إلى الملعب</p>
        </header>
        
        <form id="enqueteForm" action="https://script.google.com/macros/s/AKfycbzevq_PwsAE9o4VPw66d5VhIIyjJuKjiFNH2_-CF5y7YJaMc57X7i7krVRgIrxdDPI6/exec" method="POST">
            <!-- السؤال 1: العمر -->
            <div class="question-block">
                <div class="question-title">
                    <span class="question-number">1</span> العمر <span class="required">*</span>
                </div>
                <div class="options">
                    <div class="option-row">
                        <input type="radio" id="age1" name="age" value="أقل من 15 سنة" required>
                        <label for="age1">أقل من 15 سنة</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="age2" name="age" value="15-29 سنة">
                        <label for="age2">15–29 سنة</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="age3" name="age" value="30-44 سنة">
                        <label for="age3">30–44 سنة</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="age4" name="age" value="45-59 سنة">
                        <label for="age4">45–59 سنة</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="age5" name="age" value="60 سنة فما فوق">
                        <label for="age5">60 سنة فما فوق</label>
                    </div>
                </div>
            </div>
            
            <!-- السؤال 2: الجنس -->
            <div class="question-block">
                <div class="question-title">
                    <span class="question-number">2</span> الجنس <span class="required">*</span>
                </div>
                <div class="options">
                    <div class="option-row">
                        <input type="radio" id="sexe1" name="sexe" value="أنثى" required>
                        <label for="sexe1">أنثى</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="sexe2" name="sexe" value="ذكر">
                        <label for="sexe2">ذكر</label>
                    </div>
                </div>
            </div>
            
            <!-- السؤال 3: نوع الملف الشخصي -->
            <div class="question-block">
                <div class="question-title">
                    <span class="question-number">3</span> نوع الملف الشخصي <span class="required">*</span>
                </div>
                <div class="options">
                    <div class="option-row">
                        <input type="radio" id="profil1" name="profil" value="مقيم في أكادير الكبير" required>
                        <label for="profil1">مقيم في أكادير الكبير</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="profil2" name="profil" value="سائح وطني">
                        <label for="profil2">سائح وطني</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="profil3" name="profil" value="سائح دولي">
                        <label for="profil3">سائح دولي</label>
                    </div>
                </div>
            </div>
            
            <!-- السؤال 4: مكان الانطلاق -->
            <div class="question-block">
                <div class="question-title">
                    <span class="question-number">4</span> مكان الانطلاق <span class="required">*</span>
                </div>
                <div class="options">
                    <div class="option-row">
                        <input type="radio" id="origine1" name="origine" value="بلدية أكادير" required>
                        <label for="origine1">بلدية أكادير</label>
                    </div>
                    <div class="conditional" id="communeAgadirDetail">
                        <input type="text" class="text-input" name="communeAgadirDetail" placeholder="يرجى تحديد الحي أو المنطقة/الفندق لغير المقيمين">
                    </div>
                    
                    <div class="option-row">
                        <input type="radio" id="origine2" name="origine" value="بلدية إنزكان">
                        <label for="origine2">بلدية إنزكان</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="origine3" name="origine" value="بلدية أورير">
                        <label for="origine3">بلدية أورير</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="origine4" name="origine" value="بلدية الدراركة">
                        <label for="origine4">بلدية الدراركة</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="origine5" name="origine" value="بلدية آيت ملول">
                        <label for="origine5">بلدية آيت ملول</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="origine6" name="origine" value="بلدية الدشيرة">
                        <label for="origine6">بلدية الدشيرة</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="origine7" name="origine" value="بلدية القليعة">
                        <label for="origine7">بلدية القليعة</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="origine8" name="origine" value="بلدية تغازوت">
                        <label for="origine8">بلدية تغازوت</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="origine9" name="origine" value="بلدية/مدينة أخرى">
                        <label for="origine9">بلدية/مدينة أخرى : يرجى التحديد</label>
                    </div>
                    <div class="conditional" id="autreCommuneDetail">
                        <input type="text" class="text-input" name="autreCommuneDetail" placeholder="يرجى تحديد البلدية أو المدينة">
                    </div>
                </div>
            </div>
            
            <!-- السؤال 5: وسيلة النقل -->
            <div class="question-block">
                <div class="question-title">
                    <span class="question-number">5</span> وسيلة (وسائل) النقل المستخدمة للوصول إلى الملعب <span class="required">*</span>
                </div>
                <p class="note">(في حالة التنقل متعدد الوسائط، يجب تحديد عدة وسائل)</p>
                
                <div class="options">
                    <div class="option-row">
                        <input type="checkbox" id="mode1" name="mode" value="سيراً على الأقدام">
                        <label for="mode1">سيراً على الأقدام</label>
                    </div>
                    
                    <div class="sub-question" id="piedDetail">
                        <div class="sub-question-title">طوال الرحلة</div>
                        <div class="option-row">
                            <input type="radio" id="pied1" name="pied_type" value="كامل الرحلة سيراً على الأقدام">
                            <label for="pied1">كامل الرحلة سيراً على الأقدام</label>
                        </div>
                        <div class="option-row">
                            <input type="radio" id="pied2" name="pied_type" value="مشي على الأقدام مدمج مع وسائل أخرى">
                            <label for="pied2">مشي على الأقدام مدمج مع وسائل أخرى</label>
                        </div>
                    </div>
                    
                    <div class="option-row">
                        <input type="checkbox" id="mode2" name="mode" value="دراجة نارية">
                        <label for="mode2">دراجة نارية</label>
                    </div>
                    <div class="option-row">
                        <input type="checkbox" id="mode3" name="mode" value="دراجة هوائية">
                        <label for="mode3">دراجة هوائية</label>
                    </div>
                    <div class="option-row">
                        <input type="checkbox" id="mode4" name="mode" value="سكوتر">
                        <label for="mode4">سكوتر</label>
                    </div>
                    <div class="option-row">
                        <input type="checkbox" id="mode5" name="mode" value="حافلة">
                        <label for="mode5">حافلة</label>
                    </div>
                    <div class="option-row">
                        <input type="checkbox" id="mode6" name="mode" value="تاكسي صغير">
                        <label for="mode6">تاكسي صغير</label>
                    </div>
                    <div class="option-row">
                        <input type="checkbox" id="mode7" name="mode" value="تاكسي كبير">
                        <label for="mode7">تاكسي كبير</label>
                    </div>
                    
                    <div class="option-row">
                        <input type="checkbox" id="mode8" name="mode" value="نقل مكوكي CAN">
                        <label for="mode8">نقل مكوكي CAN (يرجى تحديد نوع النقل المكوكي)</label>
                    </div>
                    
                    <div class="conditional" id="navetteDetail">
                        <div class="sub-question">
                            <div class="sub-question-title">نوع النقل المكوكي CAN</div>
                            <div class="option-row">
                                <input type="radio" id="navette1" name="navette_type" value="تغازوت">
                                <label for="navette1">تغازوت</label>
                            </div>
                            <div class="option-row">
                                <input type="radio" id="navette2" name="navette_type" value="وادي الطيور">
                                <label for="navette2">وادي الطيور</label>
                            </div>
                            <div class="option-row">
                                <input type="radio" id="navette3" name="navette_type" value="المطار">
                                <label for="navette3">المطار</label>
                            </div>
                            <div class="option-row">
                                <input type="radio" id="navette4" name="navette_type" value="إنزكان">
                                <label for="navette4">إنزكان</label>
                            </div>
                            <div class="option-row">
                                <input type="radio" id="navette5" name="navette_type" value="آخر">
                                <label for="navette5">آخر : يرجى التحديد</label>
                            </div>
                            <div class="conditional" id="autreNavetteDetail">
                                <input type="text" class="text-input" name="autreNavetteDetail" placeholder="يرجى تحديد النقل المكوكي">
                            </div>
                        </div>
                    </div>
                    
                    <div class="option-row">
                        <input type="checkbox" id="mode9" name="mode" value="سيارة">
                        <label for="mode9">سيارة</label>
                    </div>
                    
                    <div class="conditional" id="voitureDetail">
                        <div class="sub-question">
                            <div class="sub-question-title">تفاصيل السيارة</div>
                            <div style="margin-bottom: 15px;">
                                <label for="nbPersonnes">عدد الأشخاص في السيارة :</label>
                                <input type="number" id="nbPersonnes" name="nbPersonnes" min="1" max="20" class="text-input" style="width: 100px; margin-right: 10px; text-align: center;">
                            </div>
                            
                            <div class="sub-question-title">مكان الوقوف :</div>
                            
                            <div style="margin-bottom: 15px;">
                                <strong>داخل منطقة الملعب (بين الطريق السريع والطريق الدائري الشمالي الشرقي)</strong>
                                <div class="option-row">
                                    <input type="radio" id="park1" name="parking" value="مواقف داخل الملعب">
                                    <label for="park1">مواقف داخل الملعب</label>
                                </div>
                                <div class="option-row">
                                    <input type="radio" id="park2" name="parking" value="مواقف السيارات/الدراجات بالقرب من موقف النقل المكوكي">
                                    <label for="park2">مواقف السيارات/الدراجات بالقرب من موقف النقل المكوكي</label>
                                </div>
                                <div class="option-row">
                                    <input type="radio" id="park3" name="parking" value="موقف قصر المؤتمرات">
                                    <label for="park3">موقف قصر المؤتمرات</label>
                                </div>
                                <div class="option-row">
                                    <input type="radio" id="park4" name="parking" value="موقف غير مهيأ خلف موقف الحافلات">
                                    <label for="park4">موقف غير مهيأ خلف موقف الحافلات</label>
                                </div>
                                
                                <div style="margin-right: 15px;">
                                    <div class="sub-question-title">على الطريق :</div>
                                    <div class="option-row">
                                        <input type="radio" id="voirie1" name="voirie" value="مدخل تارودانت">
                                        <label for="voirie1">مدخل تارودانت</label>
                                    </div>
                                    <div class="option-row">
                                        <input type="radio" id="voirie2" name="voirie" value="مدخل سوس">
                                        <label for="voirie2">مدخل سوس</label>
                                    </div>
                                    <div class="option-row">
                                        <input type="radio" id="voirie3" name="voirie" value="مدخل المحيط">
                                        <label for="voirie3">مدخل المحيط</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div>
                                <strong>خارج منطقة الملعب :</strong>
                                <div class="option-row">
                                    <input type="radio" id="park5" name="parking" value="خارج منطقة الملعب">
                                    <label for="park5">يرجى تحديد الجادة/الشارع :</label>
                                </div>
                                <div class="conditional" id="exterieurDetail">
                                    <input type="text" class="text-input" name="exterieurDetail" placeholder="اسم الجادة أو الشارع">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- السؤال 6: الصعوبات -->
            <div class="question-block">
                <div class="question-title">
                    <span class="question-number">6</span> هل واجهت أي صعوبات؟ <span class="required">*</span>
                </div>
                <div class="options">
                    <div class="option-row">
                        <input type="radio" id="difficulte1" name="difficulte" value="لا" required>
                        <label for="difficulte1">لا</label>
                    </div>
                    <div class="option-row">
                        <input type="radio" id="difficulte2" name="difficulte" value="نعم">
                        <label for="difficulte2">نعم → ما هي؟</label>
                    </div>
                    
                    <div class="conditional" id="difficultesDetail">
                        <div class="sub-question">
                            <div class="sub-question-title">أنواع الصعوبات التي واجهتها :</div>
                            <div class="option-row">
                                <input type="checkbox" id="diff1" name="difficultes_type" value="ازدحام مروري">
                                <label for="diff1">ازدحام مروري</label>
                            </div>
                            <div class="option-row">
                                <input type="checkbox" id="diff2" name="difficultes_type" value="صعوبة في الوقوف">
                                <label for="diff2">صعوبة في الوقوف</label>
                            </div>
                            <div class="option-row">
                                <input type="checkbox" id="diff3" name="difficultes_type" value="اكتظاظ في النقل العام">
                                <label for="diff3">اكتظاظ في النقل العام</label>
                            </div>
                            <div class="option-row">
                                <input type="checkbox" id="diff4" name="difficultes_type" value="إشارات غير كافية">
                                <label for="diff4">إشارات غير كافية</label>
                            </div>
                            <div class="option-row">
                                <input type="checkbox" id="diff5" name="difficultes_type" value="آخر">
                                <label for="diff5">آخر :</label>
                            </div>
                            <div class="conditional" id="autreDifficulteDetail">
                                <input type="text" class="text-input" name="autreDifficulteDetail" placeholder="يرجى تحديد الصعوبة">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <button type="submit" class="btn-submit">إرسال الاستبيان</button>
            
            <input type="hidden" name="_subject" value="رد جديد على استبيان أكادير الكبير">
            <input type="hidden" name="_format" value="plain">
        </form>
        
        <div class="footer">
            <p>شكراً للمشاركة في هذا الاستبيان. ستساعدنا ردودك على تحسين إمكانية الوصول إلى ملعب أكادير الكبير.</p>
            <p>© 2023 - استبيان النقل لأكادير الكبير</p>
        </div>
    </div>

    <script>
        // إدارة الحقول الشرطية
        document.querySelectorAll('input[type="radio"], input[type="checkbox"]').forEach(input => {
            input.addEventListener('change', function() {
                // مكان الانطلاق
                if (this.name === 'origine' && this.value === 'بلدية أكادير') {
                    document.getElementById('communeAgadirDetail').classList.add('show');
                } else if (this.name === 'origine') {
                    document.getElementById('communeAgadirDetail').classList.remove('show');
                }
                
                if (this.name === 'origine' && this.value === 'بلدية/مدينة أخرى') {
                    document.getElementById('autreCommuneDetail').classList.add('show');
                } else if (this.name === 'origine') {
                    document.getElementById('autreCommuneDetail').classList.remove('show');
                }
                
                // وسيلة النقل
                if (this.id === 'mode1') {
                    document.getElementById('piedDetail').classList.toggle('show', this.checked);
                }
                
                if (this.id === 'mode8') {
                    document.getElementById('navetteDetail').classList.toggle('show', this.checked);
                }
                
                if (this.id === 'mode9') {
                    document.getElementById('voitureDetail').classList.toggle('show', this.checked);
                }
                
                // النقل المكوكي CAN
                if (this.name === 'navette_type' && this.value === 'آخر') {
                    document.getElementById('autreNavetteDetail').classList.add('show');
                } else if (this.name === 'navette_type') {
                    document.getElementById('autreNavetteDetail').classList.remove('show');
                }
                
                // الوقوف خارج الملعب
                if (this.id === 'park5') {
                    document.getElementById('exterieurDetail').classList.toggle('show', this.checked);
                } else if (this.name === 'parking' && this.id !== 'park5') {
                    document.getElementById('exterieurDetail').classList.remove('show');
                }
                
                // الصعوبات
                if (this.name === 'difficulte' && this.value === 'نعم') {
                    document.getElementById('difficultesDetail').classList.add('show');
                } else if (this.name === 'difficulte') {
                    document.getElementById('difficultesDetail').classList.remove('show');
                    document.getElementById('autreDifficulteDetail').classList.remove('show');
                }
                
                // صعوبة أخرى
                if (this.id === 'diff5') {
                    document.getElementById('autreDifficulteDetail').classList.toggle('show', this.checked);
                }
                
                updateProgressBar();
            });
        });
        
        // شريط التقدم
        function updateProgressBar() {
            const questions = document.querySelectorAll('.question-block');
            let answered = 0;
            
            questions.forEach(question => {
                const inputs = question.querySelectorAll('input[type="radio"]:checked, input[type="checkbox"]:checked, input[type="text"]:not([value=""]), input[type="number"]:not([value=""])');
                const required = question.querySelector('.required');
                
                if (required && inputs.length > 0) {
                    answered++;
                }
            });
            
            const progress = (answered / questions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }
        
        // مستمعو الإدخال للحقول النصية/الرقمية
        document.querySelectorAll('input[type="text"], input[type="number"]').forEach(input => {
            input.addEventListener('input', updateProgressBar);
        });
        
        // التحقق قبل الإرسال
        document.getElementById('enqueteForm').addEventListener('submit', function(e) {
            // التحقق الأساسي - التأكد من أن الأسئلة الإلزامية مملوءة
            const requiredRadios = document.querySelectorAll('input[type="radio"][required]');
            let allRequiredFilled = true;
            
            requiredRadios.forEach(radio => {
                const name = radio.name;
                const checkedInGroup = document.querySelector(`input[name="${name}"]:checked`);
                if (!checkedInGroup) {
                    allRequiredFilled = false;
                    const questionBlock = radio.closest('.question-block');
                    questionBlock.style.borderRightColor = '#e74c3c';
                    
                    // إعادة اللون بعد فترة
                    setTimeout(() => {
                        questionBlock.style.borderRightColor = '#1a5fb4';
                    }, 3000);
                }
            });
            
            if (!allRequiredFilled) {
                e.preventDefault();
                alert('يرجى الإجابة على جميع الأسئلة الإلزامية (المشار إليها بـ *).');
                return;
            }
            
            // إذا كنت تستخدم Formspree، سيتم إرسال النموذج بشكل طبيعي
            // إذا كنت تستخدم خادمًا خلفيًا مخصصًا، قم بتعديل إجراء النموذج
            alert('شكراً لك! تم إرسال استبيانك بنجاح.');
        });
        
        // تهيئة شريط التقدم
        document.addEventListener('DOMContentLoaded', updateProgressBar);
    </script>
</body>
</html>